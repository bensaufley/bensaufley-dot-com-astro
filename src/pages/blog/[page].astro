---
import { getFeed } from '~lib/feed';

import PageComponent, { PER_PAGE } from '../../components/blog/Page.astro';

export const getStaticPaths = async () => {
  const [, entries] = await getFeed();

  return Array.from({
    length: Math.ceil(entries / PER_PAGE),
  }).map((_, i) => ({ params: { page: i + 1 }, props: { page: i + 1 } }));
};

export interface Props {
  class?: string | undefined;
  page?: number;
}

const { class: className, page = 1 } = Astro.props;
---

<PageComponent class={className} page={page} />
